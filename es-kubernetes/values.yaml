#Default values for eventstoredb deployment
#Ensure to fill the relevant values for the public URLs

clusterSize: 3

#Configure the service account to run under
serviceAccount:
  create: true
  annotations: {}
  # The name of the service account to use.
  # If not set and create is true, a name is automatically generated
  name: ""

podAnnotations: {}

#Configure EventStoreDB cluster nodes
cluster:
  annotations: {}
  nodeSelector: {}
  terminationGracePeriodSeconds: 120
  podSecurityContext:
    #The default eventstore images run as the user eventstore:1000
    fsGroup: 1000 
  imagePullSecrets: {}

#Configure the proxy helper image
image:
  repository: jeremysv/eventstore-proxy
  tag: latest
  pullPolicy: Always

#Configure the public reverse proxy
proxy:
  #Configure the ingress resource
  ingress:
    annotations:
  
  #Node domain names
  hosts:
    '0': 'a.esdb.local'
    '1': 'b.esdb.local'
    '2': 'c.esdb.local'
  
  #Configure the proxy resource limits
  resources:
    requests:
      memory: 64Mi
      cpu: 128m
    limits:
      memory: 512Mi
      cpu: 1

#Configure the eventstore cluster containers
eventstore:
  storage:
    data:
      class: premium
      annotations: {}
      size: 100Gi
    logs:
      class: premium
      annotations: {}
      size: 100Gi
  
  config:
    #Custom eventstore config YAML. Overrides any values configured by proxy
    shared: 'RunProjections: All'
    '0': ''
    '1': ''
    '2': ''
    
  image:
    repository: eventstore/eventstore
    #If tag is not provided, then chart appversion will be used
    tag: ""
    pullPolicy: Always
    base: bionic #eventstore provides bionic and buster-slim base images
  #Configure the node resource limits
  resources:
    requests:
      memory: 256Mi
      cpu: 250m
    limits:
      memory: 2Gi
      cpu: '2'
  startupProbe:
    failureThreshold: 30
    periodSeconds: 10
